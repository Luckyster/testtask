{"version":3,"sources":["src/js/filters.js"],"names":["document","addEventListener","filterContainers","querySelectorAll","filterPosts","skip","loadMore","section","closest","filterForm","querySelector","albumsList","loadMoreButton","skipInput","ajaxUrl","ajax","value","formData","FormData","append","fetch","method","body","then","response","json","data","innerHTML","hide_more","style","display","disabled","catch","error","console","forEach","container"],"mappings":";;;;;IAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAW;MACrD,MAAMC,gBAAgB,GAAGF,QAAQ,CAACG,gBAAgB,CAAC,4BAA4B,CAAC;MAEhF,SAASC,WAAWA,CAACC,IAAI,GAAG,IAAI,EAAEC,QAAQ,GAAG,IAAI,EAAEC,OAAO,GAAG,IAAI,CAACC,OAAO,CAAC,4BAA4B,CAAC,EAAE;QACrG,MAAMC,UAAU,GAAGF,OAAO,CAACG,aAAa,CAAC,uBAAuB,CAAC;QACjE,MAAMC,UAAU,GAAGJ,OAAO,CAACG,aAAa,CAAC,iBAAiB,CAAC;QAC3D,MAAME,cAAc,GAAGL,OAAO,CAACG,aAAa,CAAC,uBAAuB,CAAC;QACrE,MAAMG,SAAS,GAAGN,OAAO,CAACG,aAAa,CAAC,UAAU,CAAC;QACnD,MAAMI,OAAO,GAAGC,IAAI,CAACD,OAAO;QAC5B,IAAIT,IAAI,EAAE;UACNQ,SAAS,CAACG,KAAK,GAAG,CAAC;;QAEvB,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAACT,UAAU,CAAC;QACzCQ,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAE,eAAe,CAAC;QAC1CF,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEN,SAAS,CAACG,KAAK,CAAC;QACxCI,KAAK,CAACN,OAAO,EAAE;UACXO,MAAM,EAAE,MAAM;UACdC,IAAI,EAAEL;SACT,CAAC,CACGM,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,EAAE,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;UACV,IAAI,CAACpB,QAAQ,EAAEK,UAAU,CAACgB,SAAS,GAAG,EAAE;UACxChB,UAAU,CAACgB,SAAS,IAAID,IAAI,CAACA,IAAI;UAGjCb,SAAS,CAACG,KAAK,GAAGU,IAAI,CAACrB,IAAI;;;UAG3B,IAAIqB,IAAI,CAACE,SAAS,EAAE;YAChB,IAAIhB,cAAc,EAAE;cAChBA,cAAc,CAACiB,KAAK,CAACC,OAAO,GAAG,MAAM;cACrClB,cAAc,CAACmB,QAAQ,GAAG,IAAI;;WAErC,MAAM;YACH,IAAInB,cAAc,EAAE;cAChBA,cAAc,CAACiB,KAAK,CAACC,OAAO,GAAG,MAAM;cACrClB,cAAc,CAACmB,QAAQ,GAAG,KAAK;;;SAG1C,CAAC,CACDC,KAAK,CAACC,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC,CAAC;;;;MAKvD/B,gBAAgB,CAACiC,OAAO,CAACC,SAAS,IAAI;QAClC,MAAM3B,UAAU,GAAG,IAAI,CAACC,aAAa,CAAC,uBAAuB,CAAC;QAC9D,MAAMJ,QAAQ,GAAG,IAAI,CAACI,aAAa,CAAC,uBAAuB,CAAC;QAC5DD,UAAU,CAACR,gBAAgB,CAAC,QAAQ,EAAG,MAAM;UACxCG,WAAW,CAAC,IAAI,EAAE,KAAK,EAAEgC,SAAS,CAAC;SACvC,CAAC;QACF9B,QAAQ,CAACL,gBAAgB,CAAC,OAAO,EAAE,YAAY;UAC3CG,WAAW,CAAC,KAAK,EAAE,IAAI,EAAEgC,SAAS,CAAC;SACtC,CAAC;OACL,CAAC;IACN,CAAC,CAAC","file":"filters.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    const filterContainers = document.querySelectorAll('.js-album-filter-container');\n\n    function filterPosts(skip = true, loadMore = true, section = this.closest('.js-album-filter-container')) {\n        const filterForm = section.querySelector('.js-album-filter-form');\n        const albumsList = section.querySelector('.js-albums-list');\n        const loadMoreButton = section.querySelector('.js-filters__loadmore');\n        const skipInput = section.querySelector('.js-skip');\n        const ajaxUrl = ajax.ajaxUrl;\n        if (skip) {\n            skipInput.value = 0;\n        }\n        const formData = new FormData(filterForm);\n        formData.append('action', 'filter_albums');\n        formData.append('skip', skipInput.value);\n        fetch(ajaxUrl, {\n            method: 'POST',\n            body: formData\n        })\n            .then(response => response.json())\n            .then(data => {\n                if (!loadMore) albumsList.innerHTML = '';\n                albumsList.innerHTML += data.data;\n\n\n                skipInput.value = data.skip;\n\n                // Optionally, handle 'hide more' logic\n                if (data.hide_more) {\n                    if (loadMoreButton) {\n                        loadMoreButton.style.display = 'none';\n                        loadMoreButton.disabled = true;\n                    }\n                } else {\n                    if (loadMoreButton) {\n                        loadMoreButton.style.display = 'flex';\n                        loadMoreButton.disabled = false;\n                    }\n                }\n            })\n            .catch(error => console.error('Error:', error));\n    }\n\n\n    // Event listeners\n    filterContainers.forEach(container => {\n        const filterForm = this.querySelector('.js-album-filter-form');\n        const loadMore = this.querySelector('.js-filters__loadmore');\n        filterForm.addEventListener('change',  () => {\n             filterPosts(true, false, container);\n        });\n        loadMore.addEventListener('click', function () {\n            filterPosts(false, true, container);\n        });\n    })\n});"]}